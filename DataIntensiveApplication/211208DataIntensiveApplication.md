# 데이터 중심 애플리케이션 책을 보게 된 이유

* 회사에서 부서장님이 추천함
* 데이터 엔지니어로서 다양한 빅데이터 시스템을 이해하기 위해서 추상적인 설계 방식에 대한 쓰여진 책이라 도움이 될것으로 판단해 처음부터 끝까지 정리하고자 함

# 차례

* Part1. 데이터 시스템의 기초
  * 신뢰성, 확장성, 유지보수성
  * 데이터 모델과 질의언어
  * 저장소와 검색
* Part2. 분산 데이터
  * 부호화
  * 복제
  * 파티셔닝
  * 트랜잭션
  * 분산 시스템에서 발생할 수 있는 문제
  * 일관성과 합의
* Part3. 파생 데이터
  * 일괄 처리
  * 스트림 처리
  * 데이터 시스템의 미래

# Part1. 데이터 시스템의 기초

* 애플리케이션 요구사항의 변화
  * 예전에는 compute-intensive하였으나 이젠 data-intensive
  * cpu성능 -> 데이터 양, 복잡도, 변화속도
* 신뢰성
  * 결함에 직면해도 시스템이 원하는 성능 수준에서 정확한 기능 수행
  * 시스템이 안정적으로 작동하지 않으면 매출, 명성에 타격을 주어 많은 비용이 들게 된다
  * 결함 유형
    * 하드웨어 결함
      * 하드디스크 고장, 램 결함, 대규모 정전, 네트워크 케이블을 잘못 뽑은 것
      * 하드웨어 장비 중목, 소프트웨어 내결함성 기술을 사용하여 해결
    * 소프트웨어 오류
      * 시스템 내 체계적 오류
      * 잘못된 특정 입력이 있을 때 모든 애플리케이션 서버 인스턴스 정지, 공유자원(cpu시간, 메모리, 디스크공간, 네트워크 대역폭)을 과도하게 사용하는 프로세스, 시스템의 속도가 느려져 반응이 없거나 잘못된 응답 반환하는 서비스, cascading failure
      * 빈틈없는 테스트, 프로세스 격리, 죽은 프로세스 재시작 허용, 프로덕션 환경에서 시스템 동작의 측정, 모니터링
    * 인적 오류
      * 운영자의 설정 오류
      * 오류의 가능성을 최소화하는 추상화, 사람이 많이 실수하는 부분 분리, 실제 데이터를 미리 실험해볼 수 있는 샌드박스, 단위 테스트부터 시스템 통합 테스트를 철저히하기, 장애 발생의 영향을 최소화하기 위해 새로운 코드는 서서히 roll out/잘못된 코드는 빠른 roll back, 성능 지표와 오류율같은 명확한 모니터링
* 확장성
  * 증가한 부하에 대해 대처할 수 있는 시스템 능력
  * 시스템 현재 부하를 간결(웹 서버의 초당 요청수, 데이터베이스의 읽기 대 쓰기 비율, 대화방의 동시 활성 사용자, 캐시적중률)하게 기술하여야 부하 예측에 대한 논의가 가능하다
  * 트위터의 확장성
    * 사용자가 자신의 홈 타임라인을 요청하면 팔로우한 모든 사람의 트윗을 시간순대로 정렬하여 보여줘야 한다
    * 첫번째 방식 : 사용자는 자신의 홈 타임라인을 **요청**하는 순간 관계형 데이터베이스에 위의 질의를 하는 **쿼리**를 날린다
    * 두번째 방식 : 사용자가 트윗을 **작성**하면 해당 사용자를 팔로우하는 사람들을 모두 찾고 각자의 홈 타임라인 **캐시**에 새로운 트윗을 삽입한다. 사용자는 자신의 홈 타임라인을 요청하면 타임라인 캐시에 있는 요청결과를 가져온다
    * 팔로워가 적을 경우 두번째 방식이 더 빠르고, 팔로워가 많을 경우 첫번째 방식이 더 빠르다
  * 성능 수치 기술
    * 하둡과 온라인 시스템
      * 하둡은 처리량이 중요하고 온라인 시스템에서는 응답 시간이 중요하다
    * 응답시간
      * 일반적인 사용자가 느끼는 지연정도를 알고 싶으면 중앙값
      * 아마존의 경우 가장 소중한 고객이 응답 시간이 가장 느린 요청을 경험한 고객이라 99.9분위인 tail latency에 대해 신경쓴다(서비스 수준 목표 SLO, 서비스 수준 협약서 SLA)
      * 서버 응답 시간이 아닌 클라이언트 응답 시간 측정이 중요
* 유지보수성

